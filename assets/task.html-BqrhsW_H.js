import{_ as r}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as h,a as l,b as a,e as i,d as e,w as t,r as k,o as p}from"./app-BKbUlxdP.js";const d={};function o(c,s){const n=k("RouteLink");return p(),h("div",null,[s[13]||(s[13]=l(`<h1 id="silly-task" tabindex="-1"><a class="header-anchor" href="#silly-task"><span>silly.task</span></a></h1><p>Coroutine management and task scheduling module, providing coroutine creation, suspension, wakeup, and distributed tracing functionality.</p><h2 id="module-import" tabindex="-1"><a class="header-anchor" href="#module-import"><span>Module Import</span></a></h2><div class="language-lua line-numbers-mode" data-highlighter="shiki" data-ext="lua" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-lua"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">local</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">require</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;silly.task&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">local</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> trace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">require</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;silly.trace&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="coroutine-management" tabindex="-1"><a class="header-anchor" href="#coroutine-management"><span>Coroutine Management</span></a></h2><h3 id="task-running" tabindex="-1"><a class="header-anchor" href="#task-running"><span>task.running()</span></a></h3><p>Get the currently running coroutine.</p><ul><li><strong>Returns</strong>: <code>thread</code> - Current coroutine</li><li><strong>Example</strong>:</li></ul><div class="language-lua line-numbers-mode" data-highlighter="shiki" data-ext="lua" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-lua"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">local</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">require</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;silly.task&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">local</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> current_task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">running</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="task-fork-func-userdata" tabindex="-1"><a class="header-anchor" href="#task-fork-func-userdata"><span>task.fork(func, userdata)</span></a></h3><p>Create and schedule a new coroutine to execute an async task.</p><ul><li><strong>Parameters</strong>: <ul><li><code>func</code>: <code>async fun()</code> - Async function</li><li><code>userdata</code>: <code>any</code> (optional) - Parameter passed to wakeup (usually for internal mechanisms, rarely used in business layer)</li></ul></li><li><strong>Returns</strong>: <code>thread</code> - Newly created coroutine</li><li><strong>Example</strong>:</li></ul><div class="language-lua line-numbers-mode" data-highlighter="shiki" data-ext="lua" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-lua"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">local</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">require</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;silly.task&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">fork</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Hello from forked task&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">end</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="task-wait" tabindex="-1"><a class="header-anchor" href="#task-wait"><span>task.wait()</span></a></h3><p>Suspend the current coroutine and wait to be woken up.</p><ul><li><strong>Returns</strong>: <code>any</code> - Data passed during wakeup</li><li><strong>Note</strong>: Must be called within a coroutine, and coroutine status must be &quot;RUN&quot;</li><li><strong>Example</strong>:</li></ul><div class="language-lua line-numbers-mode" data-highlighter="shiki" data-ext="lua" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-lua"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">local</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">require</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;silly.task&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">fork</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    local</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Woken up with data:&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">end</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="task-wakeup-task-result" tabindex="-1"><a class="header-anchor" href="#task-wakeup-task-result"><span>task.wakeup(task, result)</span></a></h3><p>Wake up a waiting coroutine.</p><ul><li><strong>Parameters</strong>: <ul><li><code>task</code>: <code>thread</code> - Coroutine to wake up</li><li><code>result</code>: <code>any</code> - Data to pass to the coroutine</li></ul></li><li><strong>Note</strong>: Target coroutine status must be &quot;WAIT&quot;</li><li><strong>Example</strong>:</li></ul><div class="language-lua line-numbers-mode" data-highlighter="shiki" data-ext="lua" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-lua"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">local</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">require</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;silly.task&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">local</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> time</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">require</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;silly.time&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">local</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> t</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">fork</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">running</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    local</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Got:&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">end</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- Delayed wakeup to ensure coroutine has entered wait state</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">time</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">after</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wakeup</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;hello&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">end</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="task-status-task" tabindex="-1"><a class="header-anchor" href="#task-status-task"><span>task.status(task)</span></a></h3><p>Get the current status of a coroutine.</p><ul><li><strong>Parameters</strong>: <ul><li><code>task</code>: <code>thread</code> - Target coroutine</li></ul></li><li><strong>Returns</strong>: <code>string|nil</code> - Status string, possible values: <ul><li><code>&quot;RUN&quot;</code> - Running</li><li><code>&quot;WAIT&quot;</code> - Waiting</li><li><code>&quot;READY&quot;</code> - In ready queue</li><li><code>&quot;SLEEP&quot;</code> - Sleeping</li><li><code>&quot;EXIT&quot;</code> - Exited</li><li><code>nil</code> - Coroutine destroyed</li></ul></li></ul><h2 id="task-statistics" tabindex="-1"><a class="header-anchor" href="#task-statistics"><span>Task Statistics</span></a></h2><h3 id="task-readycount" tabindex="-1"><a class="header-anchor" href="#task-readycount"><span>task.readycount()</span></a></h3><p>Get the number of tasks waiting to execute in the ready queue.</p><ul><li><strong>Returns</strong>: <code>integer</code> - Task count</li></ul><h3 id="task-inspect" tabindex="-1"><a class="header-anchor" href="#task-inspect"><span>task.inspect()</span></a></h3><p>Get status information of all coroutines (for debugging).</p><ul><li><strong>Returns</strong>: <code>table</code> - Coroutine status table, format:</li></ul><div class="language-lua line-numbers-mode" data-highlighter="shiki" data-ext="lua" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-lua"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    [</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] = {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        traceback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;stack trace string&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        status</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;RUN|WAIT|READY|...&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="distributed-tracing" tabindex="-1"><a class="header-anchor" href="#distributed-tracing"><span>Distributed Tracing</span></a></h2><p>The task module supports associating distributed trace IDs with each coroutine for cross-service request chain tracing.</p>`,34)),a("blockquote",null,[a("p",null,[s[1]||(s[1]=i("üìñ ",-1)),s[2]||(s[2]=a("strong",null,"Full Documentation",-1)),s[3]||(s[3]=i(": For detailed distributed tracing API and usage guide, please see the ",-1)),a("strong",null,[e(n,{to:"/en/reference/trace.html"},{default:t(()=>[...s[0]||(s[0]=[i("silly.trace",-1)])]),_:1})]),s[4]||(s[4]=i(" module documentation.",-1))])]),s[14]||(s[14]=l(`<p><strong>Quick Example</strong>:</p><div class="language-lua line-numbers-mode" data-highlighter="shiki" data-ext="lua" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-lua"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">local</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> trace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">require</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;silly.trace&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- Set node ID (at service startup)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">trace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setnode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- Create new trace (when handling new request)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">trace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">spawn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- Propagate trace to downstream (when calling other services)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">local</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> traceid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">trace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">propagate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- Attach upstream trace (when receiving request)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">trace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">attach</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">upstream_traceid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Related APIs</strong>:</p>`,3)),a("ul",null,[a("li",null,[e(n,{to:"/en/reference/trace.html#tracesetnodenodeid"},{default:t(()=>[...s[5]||(s[5]=[i("trace.setnode()",-1)])]),_:1}),s[6]||(s[6]=i(" - Set node ID",-1))]),a("li",null,[e(n,{to:"/en/reference/trace.html#tracespawn"},{default:t(()=>[...s[7]||(s[7]=[i("trace.spawn()",-1)])]),_:1}),s[8]||(s[8]=i(" - Create new trace",-1))]),a("li",null,[e(n,{to:"/en/reference/trace.html#traceattachid"},{default:t(()=>[...s[9]||(s[9]=[i("trace.attach()",-1)])]),_:1}),s[10]||(s[10]=i(" - Attach trace",-1))]),a("li",null,[e(n,{to:"/en/reference/trace.html#tracepropagate"},{default:t(()=>[...s[11]||(s[11]=[i("trace.propagate()",-1)])]),_:1}),s[12]||(s[12]=i(" - Propagate trace",-1))])]),s[15]||(s[15]=l('<h2 id="advanced-api" tabindex="-1"><a class="header-anchor" href="#advanced-api"><span>Advanced API</span></a></h2><div class="hint-container caution"><p class="hint-container-title">Internal API Warning</p><p>The following functions start with <code>_</code> and are internal implementation details. <strong>They should not be used in business code</strong>.</p></div><h3 id="task-create-f" tabindex="-1"><a class="header-anchor" href="#task-create-f"><span>task._create(f)</span></a></h3><p>Create coroutine (internal API).</p><h3 id="task-resume-t" tabindex="-1"><a class="header-anchor" href="#task-resume-t"><span>task._resume(t, ...)</span></a></h3><p>Resume coroutine execution (internal API).</p><h3 id="task-yield" tabindex="-1"><a class="header-anchor" href="#task-yield"><span>task._yield(...)</span></a></h3><p>Suspend current coroutine (internal API).</p><h3 id="task-dispatch-wakeup" tabindex="-1"><a class="header-anchor" href="#task-dispatch-wakeup"><span>task._dispatch_wakeup()</span></a></h3><p>Dispatch tasks in the ready queue (internal API).</p><h3 id="task-start-func" tabindex="-1"><a class="header-anchor" href="#task-start-func"><span>task._start(func)</span></a></h3><p>Start main coroutine (internal API).</p><h3 id="task-exit-status" tabindex="-1"><a class="header-anchor" href="#task-exit-status"><span>task._exit(status)</span></a></h3><p>Exit process (internal API, use <code>silly.exit</code> instead).</p><h3 id="task-hook-create-term" tabindex="-1"><a class="header-anchor" href="#task-hook-create-term"><span>task.hook(create, term)</span></a></h3><p>Set hooks for coroutine creation and termination (advanced usage).</p><ul><li><strong>Parameters</strong>: <ul><li><code>create</code>: <code>function|nil</code> - Creation hook</li><li><code>term</code>: <code>function|nil</code> - Termination hook</li></ul></li><li><strong>Returns</strong>: <code>function, function</code> - Current resume and yield functions</li></ul>',17))])}const A=r(d,[["render",o]]),y=JSON.parse('{"path":"/en/reference/task.html","title":"silly.task","lang":"en-US","frontmatter":{"title":"silly.task","icon":"list-unordered","category":["API Reference"],"tag":["Core","Coroutine","Scheduler"],"description":"silly.task Coroutine management and task scheduling module, providing coroutine creation, suspension, wakeup, and distributed tracing functionality. Module Import Coroutine Mana...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"silly.task\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-11-30T10:07:21.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"ÈáçÂΩíÊ∑∑Ê≤å\\",\\"url\\":\\"https://blog.gotocoding.com\\"}]}"],["meta",{"property":"og:url","content":"https://gotocoding.com/silly/en/reference/task.html"}],["meta",{"property":"og:site_name","content":"Reference Manual"}],["meta",{"property":"og:title","content":"silly.task"}],["meta",{"property":"og:description","content":"silly.task Coroutine management and task scheduling module, providing coroutine creation, suspension, wakeup, and distributed tracing functionality. Module Import Coroutine Mana..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-11-30T10:07:21.000Z"}],["meta",{"property":"article:tag","content":"Scheduler"}],["meta",{"property":"article:tag","content":"Coroutine"}],["meta",{"property":"article:tag","content":"Core"}],["meta",{"property":"article:modified_time","content":"2025-11-30T10:07:21.000Z"}],["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://gotocoding.com/silly/reference/task.html"}]]},"git":{"createdTime":1763775593000,"updatedTime":1764497241000,"contributors":[{"name":"findstr","username":"findstr","email":"findstr@sina.com","commits":2,"url":"https://github.com/findstr"}]},"readingTime":{"minutes":1.77,"words":532},"filePathRelative":"en/reference/task.md","autoDesc":true}');export{A as comp,y as data};
